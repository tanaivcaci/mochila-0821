if (self.CavalryLogger) { CavalryLogger.start_js(["I9Zj4I6"]); }

__d("MUFICommentReplyLink",["DOM","MAjaxify","MParent","MRequest","MUFIConfig","MUFIInlineRepliesFunnelLogConfig","Stratcom","SubscriptionsHandler","ge"],(function(a,b,c,d,e,f,g){"use strict";var h="feed-ufi-comments";function a(a){var b=a.composerID,e=a.placeholderID,f=a.node,g=a.loadComposerURI,h=a.loggingTargetFBID,j=a.replyAuthorName,k=a.replyAuthorID;c("MUFIConfig").canReactToComment&&(f.href&&f.setAttribute("data-uri",f.href),f.removeAttribute("href"));var l=new(c("SubscriptionsHandler"))();l.addSubscriptions(d("DOM").listen(f,"click",null,function(a){i({composerID:b,placeholderID:e,loadComposerURI:g,loggingTargetFBID:h,replyAuthorName:j,replyAuthorID:k,onPreventDefault:function(){a.prevent()}})}),d("DOM").listen(f,"mousedown",null,function(a){c("Stratcom").invoke("MCommentComposer:replyButtonClick",null,{composerID:b})}),c("Stratcom").listen("m:page:unload",null,function(){l.release()}),c("Stratcom").listen("m:feed-ufi-flyout:reset",null,function(){l.release()}))}function b(a){var b=new(c("SubscriptionsHandler"))();b.addSubscriptions(c("Stratcom").listen("obj:finally",null,function(c){c=d("DOM").scry(a,"*","mufi-composer")[0];c&&c.focus&&c.focus();b.release()}))}function i(a){var b=a.composerID,e=a.placeholderID,f=a.loadComposerURI,g=a.loggingTargetFBID;a=a.onPreventDefault;g&&c("MUFIInlineRepliesFunnelLogConfig").MUFIInlineReplyComposerFunnelLogger&&c("MUFIInlineRepliesFunnelLogConfig").MUFIInlineReplyComposerFunnelLogger.logReplyClicked(g);g=c("ge")(b);b=g&&d("DOM").scry(g,"*","mufi-composer")[0];if(b){a();d("MParent").bySigil(g,h)?c("Stratcom").invoke("MUFICommentReplyLink:show-inline-composer",null,{composerRoot:g}):b.focus();return}g=c("ge")(e);if(g&&f){a();d("MAjaxify").ajaxify(null,g,new(c("MRequest"))(f),null);return}}g.initInlineRepliesWithMention=a;g.bindFocusInlineReplyComposerAfterPageFinish=b;g.focusOrLoadInlineReplyComposerWithMention=i}),98);
__d("MUFICommentLikeLink",["DOM","MLiveData","MUFIReactionsUtils","MUFIRequest","Stratcom","Style","SubscriptionsHandler","UFIReactionTypes"],(function(a,b,c,d,e,f,g){a=function(a){var b=this;this.onChange=function(){if(b.feedbackTarget.getData().request_id===b.requestID)return;var a=b.feedbackTarget.getData();a=a.viewerreaction;a&&!c("UFIReactionTypes").reactions[a]&&(a=null);var e,f;!a?(e="",f=c("UFIReactionTypes").reactions[c("UFIReactionTypes").LIKE].display_name):(e=c("UFIReactionTypes").reactions[a].color,f=c("UFIReactionTypes").reactions[a].display_name);d("DOM").setContent(b.likeLink,f);c("Style").set(b.likeLink,"color",e)};this.onClick=function(a){a.prevent();var e=b.feedbackTarget.getData(),f=e.has_viewer_liked,g=(e.comment_id||e.ft_ent_identifier).split("_")[1],h=f?c("UFIReactionTypes").NONE:c("UFIReactionTypes").LIKE,i=a.getNode("tag:a");i||(i=a.getNode("tag:div"));if(!i)return;c("Stratcom").hasSigil(b.likeLink,"kaios-like-react-trigger")&&f&&a.stop();f=d("MUFIRequest").getURI(i.getAttribute("href")||i.getAttribute("data-uri"));f.addQueryData("reaction_comment_id",g);f.addQueryData("viewer_reaction",h);d("MUFIRequest").send(b.feedbackTargetID,d("MUFIReactionsUtils").getReactionDataForComment(e,h),f)};this.onUnload=function(){b.subscriptions&&b.subscriptions.release()};this.likeLink=a.likeLink;this.requestID=a.requestID;this.feedbackTargetID=a.feedbackTargetID;this.feedbackTarget=d("MLiveData").get(a.feedbackTargetID);this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(d("DOM").listen(this.likeLink,"click",null,this.onClick.bind(this)),this.feedbackTarget.listen("change",this.onChange.bind(this)),c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)));this.likeLink.href&&(this.likeLink.setAttribute("data-uri",this.likeLink.href),this.likeLink.removeAttribute("href"))};g["default"]=a}),98);
__d("MUFICommentReactionBadge",["cx","CSS","DOM","MLiveData","Stratcom","SubscriptionsHandler","UFIReactionIcons","UFIReactionTypes","createIxElement"],(function(a,b,c,d,e,f,g,h){var i=3,j=16,k=c("UFIReactionTypes").ordering.reduce(function(a,b,c){a[b]=c;return a},{});a=function(a){var b=this;this.onChange=function(){if(b.feedbackTarget.getData().request_id===b.requestID)return;var a=b.feedbackTarget.getData(),e=a.reactioncountmap,f=c("UFIReactionTypes").ordering.filter(function(a){a=e[a];return a&&a["default"]>0}).sort(function(a,b){var c=e[a]["default"],d=e[b]["default"];return c===d?k[a]-k[b]:d-c}).slice(0,i).map(function(a,b){b=c("createIxElement")(c("UFIReactionIcons")[a][j]);a=d("DOM").create("span",{className:"_4edl"});d("DOM").appendContent(a,b);return a});c("CSS").conditionClass(b.reactionBadge,"_4edm",!!a.reactioncount);d("DOM").setContent(b.reactionBadge.firstChild,f);d("DOM").setContent(b.reactionBadge.lastChild,a.reactioncountreduced)};this.onUnload=function(){b.subscriptions&&b.subscriptions.release()};this.feedbackTarget=d("MLiveData").get(a.feedbackTargetID);this.reactionBadge=a.reactionBadge;this.requestID=a.requestID;this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(this.feedbackTarget.listen("change",this.onChange.bind(this)),c("Stratcom").listen("m:page:unload",null,this.onUnload.bind(this)))};g["default"]=a}),98);
__d("MUfiNewCommentScroll",["$","DOM","MViewport","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){a=function(a){var c=!0;if(!window.FW_ENABLED){var d=b("DOM").scry(document,"*","m-composer");c=d&&d.length<=1}if(c&&!!a.commentID){var e=b("$")(a.commentID);b("setTimeoutAcrossTransitions")(function(){b("MViewport").scrollToNode(e)},0)}};f.main=a}),null);